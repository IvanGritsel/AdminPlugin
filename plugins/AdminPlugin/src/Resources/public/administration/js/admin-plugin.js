!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/adminplugin/",n(n.s="v0fP")}({RkFq:function(e){e.exports=JSON.parse('{"admin-module":{"general":{"mainMenuItemGeneral":"Product handling","descriptionTextModule":"Do stuff with products"},"header":"Create/Update/Delete"}}')},v0fP:function(e,t,n){"use strict";n.r(t);var o=n("RkFq"),r=Shopware.Data.Criteria;Shopware.Component.register("admin-plugin-page",{template:'{% block admin_plugin_block %}\n    <sw-page>\n        {% block admin_plugin_header %}\n            <template #smart-bar-header>\n                <h2>\n\n\n                    {{ $tc(\'admin-module.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n        {% block admin_plugin_contents %}\n            <template #content>\n                <h3>Hello World!</h3>\n                <sw-card-view>\n                    {% set number = numberOfProducts %}\n                    <h4>Number of products: {{ numberOfProducts }}</h4>\n\n                    <sw-button-process @click="deleteLast, {% number = numberOfProducts %}">Delete last</sw-button-process>\n                    <sw-button-process @click="newWithDefault, {% number = numberOfProducts %}">Create new</sw-button-process>\n                    <sw-button-process @click="updateLastWithDefault">Update last</sw-button-process>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}',inject:["repositoryFactory"],data:function(){return{entity:void 0,numberOfProducts:void 0,lastProdId:void 0,autoIncrement:void 0}},computed:{productRepository:function(){return this.repositoryFactory.create("product")}},created:function(){this.countProductsAndGetLastId()},methods:{countProductsAndGetLastId:function(){var e=this,t=new r(1,1);t.addSorting(r.sort("createdAt","DESC")),t.addAggregation(r.count("count_id","id")),this.productRepository.search(t,Shopware.Context.api).then((function(t){e.entity=t[0],console.log(t[0]),e.lastProdId=t[0].id,e.autoIncrement=t[0].autoIncrement,e.numberOfProducts=t.aggregations.count_id.count}))},newWithDefault:function(){var e=this.productRepository.create(Shopware.Context.api);e.name="Default Product Name",e.description="Default Product Description",e.price=[{currencyId:"b7d2554b0ce847cd82f3ac9bd1c0dfca",extensions:[],gross:5,linked:!0,listPrice:null,net:4.2016806722689,percentage:null,regulationPrice:null}],e.stock=1,e.tax={apiAlias:null,createdAt:"2022-10-24T16:34:46.812+00:00",customFields:null,id:"b58e86a9be5c4c8a8f1effa7b02d8ff7",name:"Standard rate",position:1,products:[],rules:[],shippingMethods:[],taxRate:19,updatedAt:null},e.taxId="b58e86a9be5c4c8a8f1effa7b02d8ff7",e.productNumber="CSW1000"+this.autoIncrement,this.productRepository.save(e,Shopware.Context.api),this.countProductsAndGetLastId()},updateLastWithDefault:function(){this.entity.name="Default Product Name",this.entity.description="Default Product Description",this.entity.price=[{currencyId:"b7d2554b0ce847cd82f3ac9bd1c0dfca",extensions:[],gross:5,linked:!0,listPrice:null,net:4.2016806722689,percentage:null,regulationPrice:null}],this.productRepository.save(this.entity,Shopware.Context.api),this.countProductsAndGetLastId()},deleteLast:function(){this.productRepository.delete(this.lastProdId,Shopware.Context.api),this.countProductsAndGetLastId()}},metaInfo:function(){return{title:this.$createTitle()}}}),Shopware.Module.register("admin-plugin",{type:"plugin",name:"Newest stuff",title:"admin-module.general.mainMenuItemGeneral",description:"admin-module.general.descriptionTextModule",color:"#ff3d58",icon:"default-object-lab-flask",snippets:{"en-GB":o},routes:{index:{component:"admin-plugin-page",path:"index"}},navigation:[{label:"admin-module.general.mainMenuItemGeneral",color:"#ff3d58",path:"admin.plugin.index",icon:"default-object-lab-flask",parent:"sw-catalogue",position:100}]})}});